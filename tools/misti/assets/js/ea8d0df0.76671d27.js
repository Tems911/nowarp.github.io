"use strict";(self.webpackChunknowarp_github_io=self.webpackChunknowarp_github_io||[]).push([[335],{4905:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var o=n(4848),r=n(8453);const i={},s="Custom Detector Guide",c={id:"hacking/custom-detector",title:"Custom Detector Guide",description:"Introduction",source:"@site/docs/hacking/custom-detector.md",sourceDirName:"hacking",slug:"/hacking/custom-detector",permalink:"/tools/misti/docs/hacking/custom-detector",draft:!1,unlisted:!1,editUrl:"https://github.com/nowarp/nowarp.github.io/tree/master/docs/hacking/custom-detector.md",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Tools",permalink:"/tools/misti/docs/hacking/tools"}},a={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Writing a Detector",id:"writing-a-detector",level:2},{value:"Example Detectors",id:"example-detectors",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"custom-detector-guide",children:"Custom Detector Guide"}),"\n",(0,o.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,o.jsxs)(t.p,{children:["Misti provides an API to write custom detectors, allowing you to implement your own linting rules. These custom detectors enable you to identify specific issues in your codebase, much like other static analysis tools. The API reference can be found here: ",(0,o.jsx)(t.a,{href:"https://nowarp.github.io/docs/misti/api/",children:"Misti API Reference"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["Detectors are designed to be dynamically loaded by the Misti driver, and they are present by TypeScript classes that implement the ",(0,o.jsx)(t.a,{href:"https://nowarp.github.io/docs/misti/api/classes/detectors_detector.Detector.html",children:(0,o.jsx)(t.code,{children:"Detector"})})," interface."]}),"\n",(0,o.jsx)(t.h2,{id:"writing-a-detector",children:"Writing a Detector"}),"\n",(0,o.jsx)(t.p,{children:"To write a custom detector, create a TypeScript file using the Misti API. Here's an example of how to implement a custom detector:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:'import { Detector } from "../../src/detectors/detector";\nimport { MistiContext } from "../../src/internals/context";\nimport { CompilationUnit } from "../../src/internals/ir";\nimport {\n  createError,\n  MistiTactError,\n  Severity,\n} from "../../src/internals/errors";\n\n/**\n * An example of a custom detector that showcases the usage of the detector API.\n *\n * It reports all the contracts that don\'t have an explicit implementation of the init function.\n */\nexport class ImplicitInit extends Detector {\n  check(ctx: MistiContext, cu: CompilationUnit): MistiTactError[] {\n    return Array.from(cu.contracts).reduce((foundErrors, [_, contract]) => {\n      if (!cu.findMethodCFGByName(contract.name, "init")) {\n        const err = createError(\n          ctx,\n          `contract ${contract.name} doesn\'t define an init function`,\n          Severity.INFO,\n          contract.ref,\n        );\n        foundErrors.push(err);\n      }\n      return foundErrors;\n    }, [] as MistiTactError[]);\n  }\n}\n'})}),"\n",(0,o.jsx)(t.p,{children:"After creating a detector, you need to specify it in your configuration. Update your Misti configuration file to include the path to your custom detector implementation, e.g.:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'{\n  "detectors": [\n    { "className": "DivideBeforeMultiply" },\n    { "className": "ReadOnlyVariables" },\n    { "className": "NeverAccessedVariables" },\n    { "className": "UnboundLoops" },\n    { "className": "ZeroAddress" },\n\n    { "className": "ImplicitInit", "modulePath": "/path/to/implicitInit.ts" }\n  ],\n  "ignored_projects": [],\n  "verbosity": "default"\n}\n\n'})}),"\n",(0,o.jsxs)(t.p,{children:["After this, you could run the created detector specifying a path to it: ",(0,o.jsx)(t.code,{children:"--config path/to/mistiConfig.json test/projects/simple/tactConfig.json"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"example-detectors",children:"Example Detectors"}),"\n",(0,o.jsxs)(t.p,{children:["The best way to examine how to use the Misti API is to look at the example detectors. Navigate to the ",(0,o.jsx)(t.a,{href:"https://github.com/nowarp/misti/tree/master/examples",children:"examples directory"})," in the Misti repository to see how various detectors are implemented. Additionally, the built-in detectors are present in the project and are well-documented, providing further insight into writing effective custom detectors."]})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>c});var o=n(6540);const r={},i=o.createContext(r);function s(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);